<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="detail">
<!-- (카페별 간략정보) -->
   <select id="selectGoodsInfo" resultType="hashmap" parameterType="hashmap">
   <![CDATA[
  SELECT 
   cafe_idx, cafe_name, cafe_location, cafe_openHour,
   cafe_closeHour, cafe_tel
   FROM 
   cafeInfo 
   WHERE cafe_idx = #{CAFE_IDX}
   GROUP BY 
   cafe_idx, cafe_name, cafe_location, cafe_openHour, 
   cafe_closeHour, cafe_tel
   ]]>
   </select>
   
   <!-- (카페별 메인이미지) -->
   <select id="selectMainImage" resultType="hashmap" parameterType="hashmap">
   <![CDATA[
	select i.cafe_idx, c.cp_idx, c.cp_board_idx, c.cp_board_type, c.cp_original_file_name
	,c.cp_stored_file_name, c.cp_reg_date
	from cafeInfo i left outer join cafephoto c
	on c.cp_board_idx = i.cafe_idx
	where cp_board_type='cafeInfo'
	and i.cafe_idx=#{CAFE_IDX}
   ]]>
   </select>

   <!--    (가격정보, 사진정보 보기) -->
   <select id="selectPrice" resultType="hashmap" parameterType="hashmap">
   <![CDATA[
   select 
   O.GOODSREG_CAFE_IDX, O.goodsReg_Idx, O.goodsReg_optionName, O.goodsReg_price, 
   O.goodsReg_useTime, O.goodsReg_people, C.cp_stored_file_name
   FROM 
   OWNER_GOODSREG O , CAFEPHOTO C
   WHERE 
   O.GOODSREG_IDX = C.CP_BOARD_IDX
   AND O.GOODSREG_CAFE_IDX= #{CAFE_IDX}
   AND C.cp_board_type='owner_goodsReg'
   ]]>
   </select>


	<!-- (카페 상세정보 보기) -->
   <select id="selectContents" resultType="hashmap" parameterType="hashmap">
   <![CDATA[
   SELECT C.cafe_idx, C.cafe_name, C.cafe_contents, C.cafe_tel, C.cafe_location,
   C.cafe_openHour, C.cafe_closeHour, C.cafe_parking, C.cafe_notice, C.cafe_reg_date, 
   C.cafe_del_gb, C.cafe_accountInfo, C.cafe_own_id 
   FROM cafeInfo C
   WHERE C.cafe_idx = #{CAFE_IDX} 
   ]]>
   </select>
   
   
   <!-- (옵션별 리뷰보기) -->
    <select id="selectReview" resultType="hashmap" parameterType="hashmap">
    <![CDATA[
	select R.v_idx, R.v_writer, R.v_o_idx , R.v_contents, R.v_star, R.v_reg_date,
	O.goodsReg_optionName, C.cp_original_file_name, C.cp_stored_file_name
    from review R left outer join owner_goodsreg O
    on R.v_o_idx = O.goodsreg_idx
    left outer join cafephoto C
    on  O.goodsreg_idx = C.cp_board_idx
    where R.v_c_idx = #{CAFE_IDX}
    and C.cp_board_type= 'owner_goodsReg'
	]]>
   </select>
   
   <!-- <상품 찜 여부 확인용 데이터 가져오기>
	<select id="getZzim" resultType="hashmap">
	<![CDATA[
	select *from zzim 
	where zim_goodsReg_Idx=#{CAFE_IDX}
	]]>
	</select>
	
	<상품 상세페이지 찜하기>
	<insert id="setZzim">
	<![CDATA[
	insert into zzim(zim_idx,zim_m_id, zim_goodsReg_Idx, zim_reg_date)
	values(zzim_seq.nextval, #{zim_m_id}, #{zim_goodsReg_Idx}, sysdate)
	]]>
	</insert>
	
	<상품 상세페이지 찜 취소 기능>
	<delete id="delZzim">
	<![CDATA[
	delete from zzim 
	where zim_m_id=#{m_id}
	]]>
	</delete> -->
	
</mapper>